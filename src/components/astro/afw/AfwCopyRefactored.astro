---
import { afwContent } from "../../../data/afwContent.ts";
import CardSection from "./CardSection.astro";
import SectionTitle from "./SectionTitle.astro";
import DateHeader from "./DateHeader.astro";
import WeekendHeader from "./WeekendHeader.astro";
import WeekendImages from "./WeekendImages.astro";
import AfwEvent from "./AfwEvent.astro";

function formatDate(dateString: string) {
  // Remove spaces and commas, and convert to lowercase
  return dateString.replace(/[\s,]+/g, "").toLowerCase();
}
---

<div class="text-left">
  <div class="flex flex-col font-serif text-skin-base text-opacity-90">
    <div class="mx-auto mt-6 max-w-screen-lg md:mt-12">
      <!-- Introduction -->
      <section class="mb-10">
        <p class="text-lg">{afwContent.intro.text}</p>
      </section>

      <!-- Listening Experiences -->
      <section class="mb-10">
        <SectionTitle title={afwContent.listeningExperiences.title} />

        {
          afwContent.listeningExperiences.experiences.map((experience) => (
            <CardSection
              title={experience.title}
              content={experience.description}
            />
          ))
        }
      </section>

      <!-- Event Schedule -->
      <section class="mb-16">
        <!-- <SectionTitle title={afwContent.eventSchedule.title} /> -->

        {
          afwContent.eventSchedule.weekends.map((weekend) => (
            <div class="mb-10">
              <WeekendHeader title={weekend.title} />

              {weekend.days.map((day) => (
                <div class="mb-8" id={formatDate(day.date)}>
                  <DateHeader date={day.date} />
                  {day.images && <WeekendImages images={day.images} />}

                  {day.events.map((event) => (
                    <AfwEvent event={event} />
                  ))}
                </div>
              ))}
            </div>
          ))
        }

        <CardSection
          title={afwContent.eventDetails.title}
          content={`
            <p><strong>Location</strong>: ${afwContent.eventDetails.location}</p>
            <p><strong>Duration</strong>: ${afwContent.eventDetails.duration}</p>
            <p><strong>Admission</strong>: ${afwContent.eventDetails.admission}</p>
          `}
          isHtml={true}
        />
      </section>

      <!-- Conclusion -->
      <section>
        <p>{afwContent.conclusion.text}</p>
        <p class="italic">{afwContent.conclusion.note}</p>
      </section>
    </div>
  </div>
</div>
